<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Candy Crush Pro</title>

<style>
*{box-sizing:border-box;font-family:'Segoe UI',sans-serif}

body{
    margin:0;
    background:radial-gradient(circle,#ff7ad9,#8b5cf6);
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}

.game{
    background:rgba(0,0,0,.5);
    padding:20px;
    border-radius:20px;
    box-shadow:0 0 30px #fff;
    text-align:center;
    color:white;
}

h1{
    margin-bottom:10px;
    text-shadow:0 0 15px #fff;
}

.score{
    font-size:18px;
    margin-bottom:10px;
}

.grid{
    display:grid;
    grid-template-columns:repeat(8,50px);
    gap:5px;
}

.cell{
    width:50px;
    height:50px;
    border-radius:12px;
    cursor:pointer;
    box-shadow:0 0 10px #000;
    transition:0.15s;
}

.cell:hover{transform:scale(1.05);}

.red{background:radial-gradient(circle,#ff5f5f,#b91c1c);}
.blue{background:radial-gradient(circle,#60a5fa,#1d4ed8);}
.green{background:radial-gradient(circle,#4ade80,#15803d);}
.yellow{background:radial-gradient(circle,#fde047,#ca8a04);}
.purple{background:radial-gradient(circle,#c084fc,#7c3aed);}
.orange{background:radial-gradient(circle,#fb923c,#c2410c);}

</style>
</head>

<body>

<div class="game">
    <h1>üç¨ Candy Crush</h1>
    <div class="score">Score: <span id="score">0</span></div>
    <div class="grid" id="grid"></div>
</div>

<script>
const grid=document.getElementById("grid");
const scoreEl=document.getElementById("score");
const width=8;
let score=0;

const colors=["red","blue","green","yellow","purple","orange"];
let board=[];
let dragStart=null;

function createBoard(){
    for(let i=0;i<64;i++){
        let cell=document.createElement("div");
        let color=colors[Math.floor(Math.random()*colors.length)];
        cell.className="cell "+color;
        cell.draggable=true;
        cell.dataset.id=i;
        board.push(color);
        grid.appendChild(cell);
    }
}

function swap(a,b){
    [board[a],board[b]]=[board[b],board[a]];
    draw();
}

function draw(){
    document.querySelectorAll(".cell").forEach((c,i)=>{
        c.className="cell "+board[i];
    });
}

function checkMatches(){
    for(let i=0;i<64;i++){
        let row=i%8;
        let color=board[i];
        if(color==="") continue;

        if(row<6 && color===board[i+1] && color===board[i+2]){
            board[i]=board[i+1]=board[i+2]="";
            score+=30;
        }
        if(i<48 && color===board[i+8] && color===board[i+16]){
            board[i]=board[i+8]=board[i+16]="";
            score+=30;
        }
    }
}

function dropCandies(){
    for(let i=63;i>=0;i--){
        if(board[i]===""){
            board[i]=colors[Math.floor(Math.random()*colors.length)];
        }
        if(i>=8 && board[i]===""){
            board[i]=board[i-8];
            board[i-8]="";
        }
    }
}

grid.addEventListener("dragstart",e=>dragStart=e.target.dataset.id);
grid.addEventListener("dragover",e=>e.preventDefault());
grid.addEventListener("drop",e=>{
    let dropId=e.target.dataset.id;
    if(Math.abs(dragStart-dropId)===1||Math.abs(dragStart-dropId)===8){
        swap(dragStart,dropId);
    }
});

function gameLoop(){
    checkMatches();
    dropCandies();
    draw();
    scoreEl.innerText=score;
}

createBoard();
setInterval(gameLoop,120);

</script>

</body>
</html>
